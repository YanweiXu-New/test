<?xml version="1.0" encoding="GB2312" standalone="no"?>
<object create-date="2020.11.04 15:18:32" creator="xuyanwei.apexsoft" flag="0" name="vIB_LCFQCSPZ" object-id="66bd5e3d-80ec-49ba-a566-20879970e9c2" package="01_基础参数.01_流程配置" type="1" version="1.0">
    <describe>流程发起次数配置</describe>
    <datasource-name>ECIF</datasource-name>
    <parent>tIB_LCFQCSPZ</parent>
    <attribute>268437520</attribute>
    <parameters>
        <column>
            <name>p_WF_NAME</name>
            <describe>工作流表单</describe>
            <type>0</type>
            <biz-type>100</biz-type>
            <length>256</length>
            <scale>0</scale>
            <control>1</control>
            <primary-property>0</primary-property>
            <nullable>true</nullable>
            <unique>false</unique>
            <enabled>true</enabled>
            <visible>true</visible>
            <attribute>0</attribute>
            <order-direction>0</order-direction>
            <category/>
            <fire-event>0</fire-event>
            <check-type>0</check-type>
            <real-type>0</real-type>
        </column>
    </parameters>
    <columns>
        <column>
            <name>ID</name>
            <describe>ID</describe>
            <type>8</type>
            <biz-type>200</biz-type>
            <length>16</length>
            <scale>0</scale>
            <control>0</control>
            <primary-property>2</primary-property>
            <nullable>false</nullable>
            <unique>false</unique>
            <enabled>false</enabled>
            <visible>false</visible>
            <attribute>0</attribute>
            <order-direction>0</order-direction>
            <category/>
            <fire-event>0</fire-event>
            <check-type>0</check-type>
            <real-type>1</real-type>
        </column>
        <column>
            <name>LCBD</name>
            <describe>流程表单</describe>
            <type>8</type>
            <biz-type>100</biz-type>
            <length>100</length>
            <scale>0</scale>
            <control>1</control>
            <primary-property>0</primary-property>
            <nullable>true</nullable>
            <unique>false</unique>
            <enabled>true</enabled>
            <visible>true</visible>
            <attribute>4</attribute>
            <order-direction>1</order-direction>
            <category/>
            <fire-event>0</fire-event>
            <check-type>0</check-type>
            <real-type>0</real-type>
        </column>
        <column>
            <name>LCBDM</name>
            <describe>流程表单名</describe>
            <type>8</type>
            <biz-type>100</biz-type>
            <length>200</length>
            <scale>0</scale>
            <control>1</control>
            <primary-property>0</primary-property>
            <nullable>true</nullable>
            <unique>false</unique>
            <enabled>true</enabled>
            <visible>true</visible>
            <attribute>0</attribute>
            <order-direction>0</order-direction>
            <category/>
            <fire-event>0</fire-event>
            <check-type>0</check-type>
            <real-type>0</real-type>
        </column>
        <column>
            <name>LCLX</name>
            <describe>流程类型</describe>
            <type>8</type>
            <biz-type>400</biz-type>
            <length>0</length>
            <scale>0</scale>
            <control>2</control>
            <primary-property>0</primary-property>
            <nullable>true</nullable>
            <unique>false</unique>
            <enabled>false</enabled>
            <visible>false</visible>
            <option>1|权益;2|新三板;3|固收</option>
            <ref-object/>
            <attribute>0</attribute>
            <order-direction>0</order-direction>
            <category/>
            <fire-event>0</fire-event>
            <check-type>0</check-type>
            <real-type>7</real-type>
            <properties/>
        </column>
        <column>
            <name>XMLX</name>
            <describe>项目类型</describe>
            <type>8</type>
            <biz-type>500</biz-type>
            <length>0</length>
            <scale>0</scale>
            <control>10</control>
            <primary-property>0</primary-property>
            <nullable>true</nullable>
            <unique>false</unique>
            <enabled>true</enabled>
            <visible>true</visible>
            <option/>
            <ref-object>tIB_XMLX</ref-object>
            <attribute>0</attribute>
            <order-direction>0</order-direction>
            <category/>
            <fire-event>0</fire-event>
            <check-type>0</check-type>
            <real-type>6</real-type>
            <properties/>
        </column>
        <column>
            <name>CS</name>
            <describe>次数</describe>
            <type>8</type>
            <biz-type>200</biz-type>
            <length>10</length>
            <scale>0</scale>
            <control>1</control>
            <primary-property>0</primary-property>
            <nullable>true</nullable>
            <unique>false</unique>
            <enabled>true</enabled>
            <visible>true</visible>
            <option/>
            <ref-object/>
            <attribute>0</attribute>
            <order-direction>0</order-direction>
            <category/>
            <fire-event>0</fire-event>
            <check-type>0</check-type>
            <real-type>1</real-type>
        </column>
        <column>
            <name>XGR</name>
            <describe>修改人</describe>
            <type>8</type>
            <biz-type>500</biz-type>
            <length>0</length>
            <scale>0</scale>
            <control>10</control>
            <primary-property>0</primary-property>
            <nullable>true</nullable>
            <unique>false</unique>
            <enabled>true</enabled>
            <visible>true</visible>
            <option/>
            <ref-object>tUser</ref-object>
            <attribute>0</attribute>
            <order-direction>0</order-direction>
            <category/>
            <fire-event>0</fire-event>
            <check-type>0</check-type>
            <real-type>6</real-type>
            <properties/>
        </column>
        <column>
            <name>XGSJ</name>
            <describe>修改时间</describe>
            <type>8</type>
            <biz-type>100</biz-type>
            <length>30</length>
            <scale>0</scale>
            <control>1</control>
            <primary-property>0</primary-property>
            <nullable>true</nullable>
            <unique>false</unique>
            <enabled>true</enabled>
            <visible>true</visible>
            <attribute>0</attribute>
            <order-direction>0</order-direction>
            <category/>
            <fire-event>0</fire-event>
            <check-type>0</check-type>
            <real-type>0</real-type>
        </column>
    </columns>
    <restrictions>
        <condition>{"statement":"tIB_LCFQCSPZ.LCBD = {0}","args":[{"expression":"parameter.p_WF_NAME","scale":0,"length":0,"type":0}],"type":0}</condition>
    </restrictions>
    <display-options>
        <commands>
            <command type="5">
                <describe>新增</describe>
                <define>
                    <item>vIB_LCFQCSPZ_XZ</item>
                </define>
                <is-default>0</is-default>
                <attribute>0</attribute>
            </command>
            <command type="5">
                <describe>流程发起次数配置修改</describe>
                <define>
                    <item>tIB_LCFQCSPZ_FQCSXG</item>
                </define>
                <is-default>0</is-default>
                <attribute>0</attribute>
            </command>
        </commands>
        <relations/>
    </display-options>
    <methods>
        <method create-date="2020.11.04 15:24:35" creator="xuyanwei.apexsoft" name="vIB_LCFQCSPZ_XZ" object-id="-44315815:17592210150:-7fff" type="0">
            <describe>新增</describe>
            <attribute>270532616</attribute>
            <parameters>
                <column>
                    <name>LCDM</name>
                    <describe>工作流表单</describe>
                    <type>0</type>
                    <biz-type>100</biz-type>
                    <length>100</length>
                    <scale>0</scale>
                    <control>1</control>
                    <primary-property>10</primary-property>
                    <nullable>true</nullable>
                    <unique>false</unique>
                    <enabled>false</enabled>
                    <visible>true</visible>
                    <attribute>0</attribute>
                    <order-direction>0</order-direction>
                    <expression>O_MASTER.parameter.p_WF_NAME</expression>
                    <category/>
                    <fire-event>0</fire-event>
                    <check-type>0</check-type>
                    <real-type>0</real-type>
                </column>
                <column>
                    <name>GZLBDM</name>
                    <describe>工作流表单名</describe>
                    <type>0</type>
                    <biz-type>100</biz-type>
                    <length>200</length>
                    <scale>0</scale>
                    <control>1</control>
                    <primary-property>10</primary-property>
                    <nullable>true</nullable>
                    <unique>false</unique>
                    <enabled>false</enabled>
                    <visible>true</visible>
                    <attribute>0</attribute>
                    <order-direction>0</order-direction>
                    <expression>&lt;%@ livebos language='javascript' %&gt;&#13;
ABS_SQLVALUE("SELECT DESCRIBE FROM ECIF.tIB_WorkFlow WHERE TABLENAME =? AND ROWNUM = 1",[O_MASTER.parameter.p_WF_NAME])</expression>
                    <category/>
                    <fire-event>0</fire-event>
                    <check-type>0</check-type>
                    <real-type>0</real-type>
                </column>
                <column>
                    <name>LCLX</name>
                    <describe>流程类型</describe>
                    <type>7</type>
                    <biz-type>400</biz-type>
                    <length>0</length>
                    <scale>0</scale>
                    <control>2</control>
                    <primary-property>10</primary-property>
                    <nullable>true</nullable>
                    <unique>false</unique>
                    <enabled>false</enabled>
                    <visible>true</visible>
                    <option>1|权益;2|新三板;3|固收</option>
                    <ref-object/>
                    <attribute>0</attribute>
                    <order-direction>0</order-direction>
                    <expression>&lt;%@ livebos language='javascript' %&gt;
var v_gzl = ABS_SQLVALUE("select t2.id from ecif.tIB_WorkFlow t2 where t2.name = '工作流系统' ");&#13;
var v_qy = ABS_SQLVALUE("select id from ecif.tIB_WorkFlow where grade = 1 and name = '99_工作流程'");&#13;
var v_xsb = ABS_SQLVALUE("select id from ecif.tIB_WorkFlow where grade = 1 and name = '100_新三板' ");&#13;
var v_gs = ABS_SQLVALUE("select id from ecif.tIB_WorkFlow where grade = 1 and name = '101_固收' ");&#13;
var v_dqlc = ABS_SQLVALUE("select t3.id from ecif.tIB_WorkFlow t3 where t3.tablename = ? ",[O_MASTER.parameter.p_WF_NAME]);
var v_dqlcyj = ABS_SQLVALUE("select id from ecif.tIB_WorkFlow t1 where t1.fid = ? start with id = ? connect by prior t1.fid = t1.id",[v_gzl,v_dqlc]);
var lclx ;
if (v_dqlcyj == v_qy ){
   lclx = 1;
}else if(v_dqlcyj == v_xsb){
   lclx = 2;
}else if(v_dqlcyj ==v_gs ){
  lclx = 3
}else{
  lclx = 999;
}
lclx;&#13;
</expression>
                    <category/>
                    <fire-event>0</fire-event>
                    <check-type>0</check-type>
                    <real-type>0</real-type>
                    <validation/>
                    <properties/>
                </column>
                <column>
                    <name>XMLX2</name>
                    <describe>项目类型</describe>
                    <type>6</type>
                    <biz-type>500</biz-type>
                    <length>0</length>
                    <scale>0</scale>
                    <control>10</control>
                    <primary-property>0</primary-property>
                    <nullable>false</nullable>
                    <unique>false</unique>
                    <enabled>true</enabled>
                    <visible>true</visible>
                    <option/>
                    <ref-object>tIB_XMLX</ref-object>
                    <attribute>0</attribute>
                    <order-direction>0</order-direction>
                    <category/>
                    <fire-event>0</fire-event>
                    <check-type>0</check-type>
                    <real-type>6</real-type>
                    <validation>
                        <validator name="expression">
                            <expression>&lt;%@ livebos language='javascript' %&gt;
ABS_SQLVALUE("select count(1) from ecif.tIB_LCFQCSPZ where lcbd = ? and XMLX = ?",[LCDM,XMLX2]) == 0</expression>
                            <message>该项目类型对应次数已存在！</message>
                            <attribute>0</attribute>
                        </validator>
                    </validation>
                    <constraint type="3">
                        <SQL>["tIB_XMLX.ID in \r\n(select id from ecif.tIB_XMLX t2 where  t2.ID != 100000 and {0} = 1 and t2.type = 2 start with t2.id = 100000  connect by prior t2.id = t2.fid)\r\nor\r\ntIB_XMLX.ID in \r\n(select id from ecif.tIB_XMLX t2 where  t2.ID != 110000 and {0} = 2 and t2.type = 2 start with t2.id = 110000  connect by prior t2.id = t2.fid)\r\nor\r\ntIB_XMLX.ID in \r\n(select id from ecif.tIB_XMLX t2 where  t2.ID != 120000 and {0} = 3 and t2.type = 2 start with t2.id = 120000  connect by prior t2.id = t2.fid)",[{"expression":"LCLX","scale":0,"length":0,"type":1}]]</SQL>
                        <refColumns>
                            <refColumn>LCLX</refColumn>
                        </refColumns>
                    </constraint>
                    <properties/>
                </column>
                <column>
                    <name>CS2</name>
                    <describe>次数</describe>
                    <type>1</type>
                    <biz-type>200</biz-type>
                    <length>10</length>
                    <scale>0</scale>
                    <control>1</control>
                    <primary-property>0</primary-property>
                    <nullable>false</nullable>
                    <unique>false</unique>
                    <enabled>true</enabled>
                    <visible>true</visible>
                    <option/>
                    <ref-object/>
                    <attribute>0</attribute>
                    <order-direction>0</order-direction>
                    <category/>
                    <fire-event>0</fire-event>
                    <check-type>0</check-type>
                    <real-type>0</real-type>
                    <validation>
                        <validator name="expression">
                            <expression>CS2 &gt; 0</expression>
                            <message>次数必须大于0</message>
                            <attribute>0</attribute>
                        </validator>
                    </validation>
                    <properties/>
                </column>
            </parameters>
            <extend-buttons/>
            <properties>
                <property>
                    <name>28</name>
                    <value>vIB_LCFQCSPZ_XZ</value>
                </property>
                <property>
                    <name>105</name>
                    <value>false</value>
                </property>
            </properties>
            <pre-functions/>
            <post-functions/>
        </method>
    </methods>
    <properties>
        <property>
            <name>63</name>
            <value>true</value>
        </property>
    </properties>
    <orders/>
    <panels/>
    <extend-buttons/>
</object>
